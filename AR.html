<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AR Location App</title>
    <!-- Import A-Frame and AR.js -->
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://cdn.rawgit.com/jeromeetienne/ar.js/master/aframe/build/aframe-ar.min.js"></script>
</head>
<body style="margin: 0; overflow: hidden;">

    <!-- AR.js Scene -->
    <a-scene embedded arjs="sourceType: webcam;">
        <!-- GPS Camera -->
        <a-camera gps-camera rotation-reader></a-camera>
    </a-scene>

    <script>
        // ข้อมูลสถานที่ทั้งหมด (ชื่อ, พิกัด, ประเภท)
        const locations = [
            { name: 'Library', lat: 16.752098549614722, lng: 100.19695335116747, type: 'book' },
            { name: 'Central Park', lat: 16.751785788751043, lng: 100.19716343372733, type: 'park' },
            { name: 'Parking Lot', lat: 16.75175037214075, lng: 100.19697790135913, type: 'parking' },
            { name: 'Restaurant', lat: 16.752139126844128, lng: 100.19691562049512, type: 'food' },
            { name: 'Bank', lat: 16.75193716520035, lng: 100.19669057733026, type: 'bank' },
            { name: 'Gym', lat: 16.737455358262423, lng: 100.19896605764515, type: 'gym' },
            { name: 'Museum', lat: 16.736988862034796, lng: 100.19842089234874, type: 'museum' },
            { name: 'Hospital', lat: 16.737478107656056, lng: 100.1992812695405, type: 'hospital' },
            { name: 'University', lat: 16.751848447934787, lng: 100.19696758400143, type: 'education' },
            { name: 'test2', lat: 16.75182758842014, lng: 100.19705773025863, type: 'education' },
            { name: 'test1', lat: 16.751808077931962, lng: 100.1969277610163, type: 'education' }
        ];

        // ไอคอนที่ใช้ในแต่ละประเภทของสถานที่
        const iconMapping = {
            book: 'image/book.png',
            park: 'image/park.png',
            parking: 'image/parking.png',
            food: 'image/food.png',
            bank: 'image/bank.png',
            gym: 'image/muscle.png',
            museum: 'image/museum.png',
            hospital: 'image/hospital.png',
            education: 'image/grad.png'
        };

        // สร้างเอนทิตี้ของสถานที่แต่ละจุดใน AR Scene
        locations.forEach(location => {
            const iconEntity = document.createElement('a-image');
            iconEntity.setAttribute('gps-entity-place', `latitude: ${location.lat}; longitude: ${location.lng}`);
            
            // ใช้ไอคอนจากการแมปประเภทที่กำหนดไว้
            const iconSrc = iconMapping[location.type] || "icons/default.png"; // ถ้าไม่เจอประเภทจะใช้ไอคอน default
            iconEntity.setAttribute('src', iconSrc);

            iconEntity.setAttribute('scale', '5 5 5'); // ขนาดของไอคอน
            iconEntity.setAttribute('position', '0 2 0'); // ตำแหน่งไอคอนให้ลอย
            iconEntity.setAttribute('look-at', '[gps-camera]'); // ให้ไอคอนหมุนตามกล้อง

            document.querySelector('a-scene').appendChild(iconEntity);
        });

        // ตรวจสอบการหมุนของกล้องผ่านอุปกรณ์
        window.addEventListener("deviceorientation", function(event) {
            if (event.alpha !== null) {
                // ประมวลผลการหมุนกล้อง (เพิ่มโค้ดสำหรับปรับพฤติกรรมตามการหมุนกล้องที่นี่)
                console.log("Alpha: " + event.alpha + ", Beta: " + event.beta + ", Gamma: " + event.gamma);
            } else {
                console.warn("Device orientation event.alpha is null.");
            }
        }, true);
    </script>

</body>
</html>


